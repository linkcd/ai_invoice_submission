# How to use Playwright MCP for automatically submission the invoice

## Configure Playwright MCP
In Amazon Q Developer VS Code Extension

in file [github folder]\.amazonq\agents\default.json
```json
{
  "mcpServers": {
    "playwright": {
      "command": "npx",
      "args": [
        "@playwright/mcp@latest",
        "--extension"
      ],
      "disabled": false
    }
  }
}
```

## Install playwright Chrome/Edge extension
As we need to use system default Chrome/Edge for reusing its existing credential, we install the palywright extension on these system default browsers, and use --extension flag in mcp config.

## Copy all files
pdf file and result_X.json (generated by the bedrock data automation app) into a folder named batch X

## Run Prompt
```
You are helping to submit invoice for reimbursement. You should use Playwright MCP tool to perform the task inside a browser.

There are multiple record in batchX/result_X.json file, each item is an invoice.

First, go to https://ssl3.prod-darwin.com/RewardCentre/M/RC#/SpendingAccount

For each invoice, proform the following steps. If there is any error or you are missing any information, stop and ask for help. do not make thing up. 
1. Identify first submitted item in the invoice list with following steps
2. Make a claim, 
3. Type claim is Public Transpoation
4. Recept date is purchase_date from the json data (yyyy-mm-dd)
4. Amount is the invoice_amount from the json data.
5. Receipt number is ticket_number from the json data
6. Receipt amount is the invoice_amount (NOK)
7. There is a file name for each invoice, the file is located in the same folder as the json file. Upload this file to the attachement.  
8. Click Next button, wait until it says "Your claim has been sent for approval", then click finish
9. Update the json file, mke the submitted value from false to true and save the json.
```
